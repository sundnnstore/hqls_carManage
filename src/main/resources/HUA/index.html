<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="./css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="css/icons-extra.css" />
		<link rel="stylesheet" type="text/css" href="./fonts/iconfont.css" />
		<style type="text/css">
			#bgImg {
				position: relative;
				width: 100%;
				height: 133px;
			}
			
			#bgImg>img {
				width: 100%;
				height: 100%;
			}
			
			#bgImg>.mask {
				width: 100%;
				height: 100%;
				position: absolute;
				top: 0;
				background: rbga(0, 0, 0, .3);
				z-index: 100;
			}
			
			.mui-media {
				color: #000;
				font-weight: 400;
			}
		</style>
	</head>

	<body>
		<div class="mui-content">
			<div id="bgImg">
				<img src="http://pic58.nipic.com/file/20150112/12299514_224005339000_2.jpg" alt="" />
				<div class="mask"></div>
			</div>
			<ul class="mui-table-view mui-grid-view mui-grid-9">
				<li data-type='store' class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
					<a href="javascript:;" id="store">
						<span class="mui-icon iconfont icon-mendianguanli"></span>
						<div class="mui-media-body">门店</div>
					</a>
				</li>
				<li data-type='purchase' class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
					<a href="javascript:;" id="purchase">
						<span class="mui-icon iconfont  icon-caigou"></span>
						<div class="mui-media-body">采购</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
					<a href="javascript:;" id="purchase_order">
						<span class="mui-icon iconfont icon-dingdan "></span>
						<div class="mui-media-body">采购订单</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
					<a href="javascript:;" id="finance">
						<span class="mui-icon iconfont icon-caiwu3"></span>
						<div class="mui-media-body">财务</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
					<a href="javascript:;" id="serviceOrder">
						<span class="mui-icon iconfont icon-fuwu"></span>
						<div class="mui-media-body">服务订单</div>
					</a>
				</li>
				<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
					<a href="#">
						<span class="mui-icon mui-icon-more"></span>
						<div class="mui-media-body">敬请期待</div>
					</a>
				</li>
			</ul>
		</div>
		<script src="js/mui.min.js"></script>
		<script src="js/app.js"></script>

		<script type="text/javascript">
			var plusReady = function(callback) {
				if(window.plus) {
					callback();
				} else {
					document.addEventListener('plusready', callback);
				}
			};
			plusReady(function() {
				//获取门店，采购，采购订单，财务，服务订单
				var store = document.getElementById('store');
				var purchaseele = document.getElementById('purchase');
				var purchaseOrder = document.getElementById('purchase_order');
				var finance = document.getElementById('finance');
				var serviceOrder = document.getElementById('serviceOrder');
				//门店start
				store.addEventListener('tap', function(event) {
					var target = event.target;
					var storeloding = plus.nativeUI.showWaiting('加载中...');
					var webview = null;
					//跳转采购页
					webview = plus.webview.create('app/store.html', 'store', {
						titleNView: {
							titleText: '门店',
							autoBackButton: 'true',
							backgroundColor: '#2F2C2F',
							titlecolor: "#ffffff",
							buttons: [{
								fontSize: '16px',
								text: '切换',
								float: 'right',
								onclick: changeStore
							}]
						}
					});
					webview.addEventListener('loaded', function() {

						webview.show('slide-in-right'); // 显示窗口
						storeloding.close();
						storeloding = null;
					}, false);
					//切换门店
					function changeStore() {
						var changeStore = plus.webview.getWebviewById('store');
						changeStore.evalJS('changeStore()');
					}
				});

				//门店end

				//监听点击事件

				purchaseele.addEventListener('tap', function(event) {
					var target = event.target;
					var purchaseloding = plus.nativeUI.showWaiting('加载中...');
					var webview = null;
					//跳转采购页
					webview = plus.webview.create('app/purchase.html', 'purchase', {
						titleNView: {
							titleText: '采购详情',
							autoBackButton: 'true',
							backgroundColor: '#2F2C2F',
							titlecolor: "#ffffff",

						}
					});
					webview.addEventListener('loaded', function() {
						webview.show('slide-in-right'); // 显示窗口
						purchaseloding.close();
						purchaseloding = null;
					}, false);

				});

				//采购订单 start
				purchaseOrder.addEventListener('tap', function(event) {
					var target = event.target;
					var purchase_orderloding = plus.nativeUI.showWaiting('加载中...');
					var webview = null;
					//跳转采购页
					webview = plus.webview.create('app/purchase_order.html', 'purchase_order', {
						titleNView: {
							titleText: '采购订单',
							autoBackButton: 'true',
							backgroundColor: '#2F2C2F',
							titlecolor: "#ffffff",
						}
					});
					webview.addEventListener('loaded', function() {
						webview.show('slide-in-right'); // 显示窗口
						purchase_orderloding.close();
						purchase_orderloding = null;
					}, false);
				});
				//财务 start
				finance.addEventListener('tap', function(event) {
					var target = event.target;
					var financeloding = plus.nativeUI.showWaiting('加载中...');
					var webview = null;
					//跳转采购页
					webview = plus.webview.create('app/finance.html', 'finance', {
						titleNView: {
							titleText: '财务',
							autoBackButton: 'true',
							backgroundColor: '#2F2C2F',
							titlecolor: "#ffffff",

						}
					});
					webview.addEventListener('loaded', function() {
						webview.show('slide-in-right'); // 显示窗口
						financeloding.close();
						financeloding = null;
					}, false);
				});

				//服务订单srat
				serviceOrder.addEventListener('tap', function(event) {
					var target = event.target;
					var serviceOrderloding = plus.nativeUI.showWaiting('加载中...');
					var webview = null;
					webview = plus.webview.create('app/service_order.html', 'serviceOrder', {
						titleNView: {
							titleText: '服务订单',
							autoBackButton: 'true',
							backgroundColor: '#2F2C2F',
							titlecolor: "#ffffff",

						}
					});
//					var pullrefresh_serviceOrder =  plus.webview.getWebviewById('pullrefresh_serviceOrder');
					webview && webview.addEventListener('loaded', function() {
						webview.show('slide-in-right'); // 显示窗口
						serviceOrderloding.close();
						serviceOrderloding = null;
					}, false);
				});
				//服务订单 end

				// back处理
				var backButtonPress = 0;
				mui.back = function(event) {
					backButtonPress++;
					if(backButtonPress > 1) {
						plus.runtime.quit();
					} else {
						plus.nativeUI.toast('再按一次退出应用');
					}
					setTimeout(function() {
						backButtonPress = 0;
					}, 1000);
					return false;
				};
//				plus.key.addEventListener('backbutton', function() {
//					var topWebview = plus.webview.getTopWebview();
//					if(topWebview.id !== plus.runtime.appid) {
//						topWebview.close('slide-out-right');
//					} else {
//						plus.nativeUI.confirm('是否退出应用', function(event) {
//							var index = event.index;
//							if(index === 1) {
//								plus.runtime.quit();
//							}
//						}, '退出', ['取消', '确认']);
//					}
//				});
			});
		</script>
	</body>

</html>